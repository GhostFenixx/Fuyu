@using Fuyu.Platform.Launcher.Services;

@page "/settings"

<FluentStack Orientation="Orientation.Vertical">

    <!-- server settings -->
    <FluentAccordionItem Heading="Server" Style="width: 100%;">
	    <FluentLabel>Fuyu server address:</FluentLabel>
        <FluentTextField TextFieldType="TextFieldType.Url" @oninput="FuyuAddress_TextChanged" @bind-Value="fuyuAddress" Style="width: 100%;"></FluentTextField>
        <FluentLabel>EFT server address:</FluentLabel>
        <FluentTextField TextFieldType="TextFieldType.Url" @oninput="EftAddress_TextChanged" @bind-Value="eftAddress" Style="width: 100%;"></FluentTextField>
    </FluentAccordionItem>

    <!-- client settings -->
    <FluentAccordionItem Heading="Client" Style="width: 100%;">
        <FluentLabel>Path to installation:</FluentLabel>
        <FluentTextField TextFieldType="TextFieldType.Text" @oninput="ClientDirectory_TextChanged" @bind-Value="clientDirectory" Style="width: 100%;"></FluentTextField>
    </FluentAccordionItem>

</FluentStack>

@code
{
    string clientDirectory = SettingsService.ClientDirectory;
    string fuyuAddress = SettingsService.FuyuAddress;
    string eftAddress = SettingsService.EftAddress;

    private void ClientDirectory_TextChanged(ChangeEventArgs e)
    {
        SettingsService.ClientDirectory = (string)e.Value;
    }

    private void FuyuAddress_TextChanged(ChangeEventArgs e)
    {
        SettingsService.FuyuAddress = (string)e.Value;
    }

    private void EftAddress_TextChanged(ChangeEventArgs e)
    {
        SettingsService.EftAddress = (string)e.Value;
    }
}
