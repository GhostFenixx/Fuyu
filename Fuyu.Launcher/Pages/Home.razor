@page "/"
@page "/home"

<FluentStack Orientation="Orientation.Horizontal">
    <FluentAccordionItem Heading="Server">
	    <FluentLabel>Path to installation:</FluentLabel>
        <FluentTextField TextFieldType="TextFieldType.Text" @bind-Value="serverDirectory" Style="width: 80%;"></FluentTextField>
        <br/>
        <FluentButton Appearance="Appearance.Accent" IconStart="@(new Icons.Regular.Size24.Play())" OnClick="StartServer">Start Server</FluentButton>
    </FluentAccordionItem>
    <FluentAccordionItem Heading="Client">
        <FluentLabel>Path to installation:</FluentLabel>
        <FluentTextField TextFieldType="TextFieldType.Text" @bind-Value="clientDirectory" Style="width: 80%;"></FluentTextField>
        <FluentLabel>Server address:</FluentLabel>
        <FluentTextField TextFieldType="TextFieldType.Url" @bind-Value="address" Style="width: 80%;"></FluentTextField>
        <br/>
        <FluentButton Appearance="Appearance.Accent" IconStart="@(new Icons.Regular.Size24.Play())" OnClick="StartEft">Start Game</FluentButton>
    </FluentAccordionItem>
</FluentStack>

@code
{
    string serverDirectory = Environment.CurrentDirectory;
    string clientDirectory = Environment.CurrentDirectory;
    string address = "http://localhost:8000";

    private void StartServer()
    {
        using (var process = ProcessService.StartServer(serverDirectory))
        {
            process.Start();
        }
    }

    private void StartEft()
    {
        var accountId = 480892;

        using (var process = ProcessService.StartEft(clientDirectory, accountId, address))
        {
            process.Start();
        }
    }
}
