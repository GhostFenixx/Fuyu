@using Fuyu.Platform.Launcher.Services

@page "/"
@page "/account"

<FluentStack Orientation="Orientation.Vertical">

    <FluentButton Appearance="Appearance.Accent" IconStart="@(new Icons.Regular.Size24.Play())" OnClick="StartEft">Start Game</FluentButton>

</FluentStack>

@code
{
    // placeholder
    string username = "Senko-san";
    string password = "test";
    string edition = "unheard";

    private void StartEft()
    {
        var hashedPassword = HashService.GetSHA256(password);
        RequestService.RegisterAccount(username, hashedPassword, edition);
        var sessionId = RequestService.LoginAccount(username, hashedPassword);

        using (var process = ProcessService.StartEft(SettingsService.ClientDirectory, sessionId, SettingsService.EftAddress))
        {
            process.Start();
        }
    }
}
