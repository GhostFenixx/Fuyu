@using Fuyu.Backend.Core.DTO.Accounts
@using Fuyu.Launcher.Core.Services

@page "/account"

<FluentStack Orientation="Orientation.Vertical">

    <FluentButton Appearance="Appearance.Accent" IconStart="@(new Icons.Regular.Size24.Play())" OnClick="StartEft_Clicked">Start EFT</FluentButton>
    <FluentButton Appearance="Appearance.Accent" IconStart="@(new Icons.Regular.Size24.Play())" OnClick="StartArena_Clicked">Start Arena</FluentButton>

</FluentStack>

@code
{
    [SupplyParameterFromQuery(Name = "sessionid")]
    private string sessionId { get; set; }

    private void StartEft_Clicked()
    {
        // NOTE: hack until wipe screen is created
        // -- seionmoya, 2024/09/03
        RequestService.RegisterGame("eft", "unheard");
        var accountId = 0;

        RequestService.LoginGame("eft", accountId);

        using (var process = ProcessService.StartEft(SettingsService.EftDirectory, sessionId, SettingsService.EftAddress))
        {
            process.Start();
        }
    }

    private void StartArena_Clicked()
    {
        // NOTE: hack until wipe screen is created
        // -- seionmoya, 2024/09/03
        RequestService.RegisterGame("arena", "ryzhy");

        using (var process = ProcessService.StartArena(SettingsService.ArenaDirectory, sessionId, SettingsService.ArenaAddress))
        {
            process.Start();
        }
    }
}
