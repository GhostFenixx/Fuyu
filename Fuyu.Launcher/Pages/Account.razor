@using Fuyu.Platform.Common.Models.Fuyu.Accounts
@using Fuyu.Platform.Launcher.Services

@page "/account"

<FluentStack Orientation="Orientation.Vertical">

    <FluentButton Appearance="Appearance.Accent" IconStart="@(new Icons.Regular.Size24.Play())" OnClick="StartEft_Clicked">Start EFT</FluentButton>
    <FluentButton Appearance="Appearance.Accent" IconStart="@(new Icons.Regular.Size24.Play())" OnClick="StartArena_Clicked">Start Arena</FluentButton>

</FluentStack>

@code
{
    [SupplyParameterFromQuery(Name = "sessionid")]
    private string sessionId { get; set; }

    private void StartEft_Clicked()
    {
        // NOTE: hack until wipe screen is created
        // -- seionmoya, 2024/09/03
        RequestService.RegisterGame(EGame.EFT, "unheard");

        using (var process = ProcessService.StartEft(SettingsService.EftDirectory, sessionId, SettingsService.EftAddress))
        {
            process.Start();
        }
    }

    private void StartArena_Clicked()
    {
        // NOTE: hack until wipe screen is created
        // -- seionmoya, 2024/09/03
        RequestService.RegisterGame(EGame.Arena, "ryzhy");

        using (var process = ProcessService.StartArena(SettingsService.ArenaDirectory, sessionId, SettingsService.ArenaAddress))
        {
            process.Start();
        }
    }
}
